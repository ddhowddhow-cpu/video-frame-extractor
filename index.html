<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì˜ìƒ â†’ í”„ë ˆì„ ì¶”ì¶œê¸°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {font-family: system-ui,-apple-system,sans-serif; max-width:900px; margin:40px auto; padding:20px; text-align:center; background:#fafafa; color:#333;}
    h1 {font-size:28px; margin-bottom:10px;}
    .box {background:white; border-radius:20px; padding:40px; box-shadow:0 10px 30px rgba(0,0,0,0.1); border:2px dashed #ddd;}
    input[type="file"] {margin:20px auto; font-size:16px;}
    select {padding:10px; font-size:16px; border-radius:8px; margin:15px;}
    button {padding:16px 40px; font-size:18px; border:none; border-radius:12px; cursor:pointer; margin:10px;}
    #go {background:#0d6efd; color:white;}
    #go:disabled {background:#aaa; cursor:not-allowed;}
    #zip {background:#0d9328; color:white;}
    #status {margin:25px 0; font-size:17px; min-height:50px; line-height:1.6;}
    .frames {margin-top:50px; display:flex; flex-wrap:wrap; gap:20px; justify-content:center;}
    .frames img {max-width:320px; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,0.15); transition:transform 0.2s;}
    .frames img:hover {transform:scale(1.05);}
    footer {margin-top:60px; color:#777; font-size:14px;}
  </style>
</head>
<body>
  <h1>ì˜ìƒ â†’ í”„ë ˆì„ ì¶”ì¶œê¸°</h1>
  <p>ì¹´í†¡Â·ì¸ìŠ¤íƒ€Â·ìœ íŠœë¸Œ ë™ì˜ìƒë„ ë°”ë¡œ í”„ë ˆì„ìœ¼ë¡œ ë½‘ì•„ì¤ë‹ˆë‹¤!<br>íŒŒì¼ì€ ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•Šì•„ìš”. 100% ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì²˜ë¦¬</p>

  <div class="box">
    <p><strong>1. ì˜ìƒ íŒŒì¼ ì„ íƒ (mp4, mov, webm ë“±)</strong></p>
    <input type="file" accept="video/*" id="video">

    <p><strong>í”„ë ˆì„ ê°„ê²©</strong></p>
    <select id="interval">
      <option value="0.5">0.5ì´ˆë§ˆë‹¤</option>
      <option value="1" selected>1ì´ˆë§ˆë‹¤ (ì¶”ì²œ)</option>
      <option value="2">2ì´ˆë§ˆë‹¤</option>
      <option value="3">3ì´ˆë§ˆë‹¤</option>
      <option value="5">5ì´ˆë§ˆë‹¤</option>
      <option value="10">10ì´ˆë§ˆë‹¤</option>
    </select>

    <br><br>
    <button id="go" disabled>í”„ë ˆì„ ì¶”ì¶œ ì‹œì‘</button>
    <div id="status">â†‘ íŒŒì¼ì„ ì„ íƒí•˜ë©´ íŒŒë€ ë²„íŠ¼ì´ í™œì„±í™”ë¼ìš”!</div>
  </div>

  <button id="zip" disabled>ëª¨ë“  í”„ë ˆì„ ZIPìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ</button>

  <div class="frames" id="result"></div>

  <footer>Made with ğŸ’™ by Grok & ddhowddhow-cpu</footer>

  <!-- í•œêµ­ì—ì„œ 99.9% ì„±ê³µí•˜ëŠ” ì¡°í•© (ST = Single Thread, ê°€ì¥ ì•ˆì •ì ) -->
  <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.11.6/dist/ffmpeg.min.js"></script>
  <script src="https://unpkg.com/@ffmpeg/core-st@0.11.0/ffmpeg-core.js"></script>
  <script src="https://unpkg.com/jszip@3.10.1/dist/jszip.min.js"></script>

  <script>
    const { createFFmpeg, fetchFile } = FFmpeg;
    const ffmpeg = createFFmpeg({ log: false });

    const videoInput = document.getElementById('video');
    const goBtn = document.getElementById('go');
    const zipBtn = document.getElementById('zip');
    const status = document.getElementById('status');
    const result = document.getElementById('result');
    let frames = [];

    // íŒŒì¼ ì„ íƒ â†’ ë²„íŠ¼ ë°”ë¡œ í™œì„±í™”
    videoInput.addEventListener('change', () => {
      if (videoInput.files.length > 0) {
        goBtn.disabled = false;
        status.innerHTML = `<strong>${videoInput.files[0].name}</strong><br>íŒŒë€ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!`;
      }
    });

    // ì¶”ì¶œ ì‹œì‘
    goBtn.addEventListener('click', async () => {
      const file = videoInput.files[0];
      if (!file) return;

      goBtn.disabled = true;
      zipBtn.disabled = true;
      result.innerHTML = '';
      frames = [];
      status.textContent = 'ffmpeg.wasm ë¡œë”© ì¤‘... (ìµœì´ˆ 20~50ì´ˆ ì •ë„ ê±¸ë ¤ìš”)';

      try {
        if (!ffmpeg.isLoaded()) await ffmpeg.load();

        status.textContent = 'í”„ë ˆì„ ì¶”ì¶œ ì¤‘...';
        ffmpeg.FS('writeFile', 'input', await fetchFile(file));

        const sec = document.getElementById('interval').value;
        await ffmpeg.run('-i', 'input', '-vf', `fps=1/${sec}`, '-q:v', '2', 'frame_%05d.jpg');

        const files = ffmpeg.FS('readdir', '.').filter(f => f.startsWith('frame_'));
        files.forEach(f => {
          const data = ffmpeg.FS('readFile', f);
          const blob = new Blob([data], {type: 'image/jpeg'});
          frames.push({name: f, blob});
          const img = new Image();
          img.src = URL.createObjectURL(blob);
          result.appendChild(img);
        });

        status.textContent = `ì™„ë£Œ! ì´ ${files.length}ì¥ ì¶”ì¶œëì–´ìš” ğŸ‰`;
        zipBtn.disabled = false;
      } catch (e) {
        status.textContent = `ì‹¤íŒ¨: ${e.message}\nê´‘ê³ ì°¨ë‹¨ê¸° ë„ê³  Ctrl+F5 ëˆŒëŸ¬ë³´ì„¸ìš”!`;
      }
      goBtn.disabled = false;
    });

    // ZIP ë‹¤ìš´ë¡œë“œ
    zipBtn.addEventListener('click', async () => {
      zipBtn.disabled = true;
      status.textContent = 'ZIP ì••ì¶• ì¤‘...';
      const zip = new JSZip();
      frames.forEach((f,i) => zip.file(`í”„ë ˆì„_${String(i+1).padStart(4,'0')}.jpg`, f.blob));
      const blob = await zip.generateAsync({type:'blob'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'ì˜ìƒ_í”„ë ˆì„_ì „ì²´.zip';
      a.click();
      status.textContent = 'ZIP ë‹¤ìš´ë¡œë“œ ì™„ë£Œ! ğŸ“¦';
      zipBtn.disabled = false;
    });
  </script>
</body>
</html>
